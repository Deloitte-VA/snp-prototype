package com.github.jlgrock.snp.core.data;

<<<<<<< HEAD
import com.github.jlgrock.snp.core.domain.ClassifiedAssertion;
=======
import javax.inject.Inject;

import com.github.jlgrock.snp.core.domain.ClassifiedPce;
>>>>>>> f51e3fd64588b0861079e955bbe67e7314de9873
import com.github.jlgrock.snp.core.domain.Patient;

import javax.inject.Inject;

/**
 * Store Assertions from LEGO document which have been replaced
 * with a classifier ID to the MongoDB
 *
 */
public class ClassifiedAssertionMongoDbStore implements ClassifiedAssertionStore {
	private final ClassifiedAssertionRepository classifiedAssertionRepository;
	private final PatientRepository patientRepository;

    /**
     * Create the assertion store
     * @param classifiedAssertionRepositoryIn the classifier repository, used for querying
     * @param patientRepositoryIn the patient repository, used for saving
     */
	@Inject
	public ClassifiedAssertionMongoDbStore(final ClassifiedAssertionRepository classifiedAssertionRepositoryIn,
			final PatientRepository patientRepositoryIn) {
		classifiedAssertionRepository = classifiedAssertionRepositoryIn;
		patientRepository = patientRepositoryIn;
	}
<<<<<<< HEAD

    @Override
	public void save(final Long patientId, final ClassifiedAssertion classifiedAssertion) {
=======
	
	public void save(final Long patientId, final ClassifiedPce classifiedAssertion) {
>>>>>>> f51e3fd64588b0861079e955bbe67e7314de9873
		Patient patient = patientRepository.findOneById(patientId);
		if(patient != null) {
			classifiedAssertionRepository.save(classifiedAssertion);
		}		
	}
	
}
